# -- (string) Override the name of the chart
nameOverride: ""
# -- (string) Override the full name of the chart
fullnameOverride: ""
# -- (string) A custom namespace to override the default namespace for the deployed resources
namespaceOverride: ""

# -- Container image configuration
# @default -- Omitted for brevity
image:
  # -- (string) Uptime Kuma container image repository
  repository: louislam/uptime-kuma
  # -- (string) Image pull policy
  pullPolicy: IfNotPresent
  # -- (string) Overrides the image tag whose default is the chart appVersion
  tag: "1.23.16-debian"

# -- (list) Image pull secrets to avoid DockerHub rate limits or access private registries
imagePullSecrets: []
  # - name: "secret-name"

# -- (bool) If this option is set to false a StatefulSet instead of a Deployment is used
useDeploy: true

# -- ServiceAccount configuration
# @default -- Omitted for brevity
serviceAccount:
  # -- (bool) Specifies whether a service account should be created
  create: false
  # -- (object) Annotations to add to the service account
  annotations: {}
  # -- (string) The name of the service account to use. If not set and create is true, a name is generated using the fullname template
  name: ""
  # -- (bool) Automatically mount a ServiceAccount's API credentials
  automountServiceAccountToken: true
  # -- (list) Image pull secrets to attach to the service account
  imagePullSecrets: []
    # - name: my-dockerhub-regcred

# -- (object) Annotations to add to the pod
podAnnotations: {}
# -- (object) Labels to add to the pod
podLabels: {}
  # app: uptime-kuma
# -- (list) Optional additional environment variables for the pod
podEnv: []
  # - name: "A_VARIABLE"
  #   value: "a-value"

# -- (object) Security context for the pod
podSecurityContext: {}
  # fsGroup: 2000

# -- (object) Security context for the container
securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

# -- Service configuration
# @default -- Omitted for brevity
service:
  # -- (string) Kubernetes service type
  type: ClusterIP
  # -- (int) Service port
  port: 3001
  # -- (int) Node port (only used if type is NodePort)
  nodePort:
  # -- (object) Annotations to add to the service
  annotations: {}

# -- Ingress configuration
# @default -- Omitted for brevity
ingress:
  # -- (bool) Enable ingress controller resource
  enabled: false
  # -- (string) IngressClass that will be used to implement the Ingress
  # className: ""
  # -- (object) Additional labels to add to the ingress
  extraLabels: {}
    # vhost: uptime-kuma.company.corp
  # -- (object) Annotations to add to the ingress (includes default NGINX configuration for WebSocket support)
  # @default -- Omitted for brevity
  annotations:
    nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "3600"
    nginx.ingress.kubernetes.io/server-snippets: |
      location / {
        proxy_set_header Upgrade $http_upgrade;
        proxy_http_version 1.1;
        proxy_set_header X-Forwarded-Host $http_host;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-For $remote_addr;
        proxy_set_header Host $host;
        proxy_set_header Connection "upgrade";
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header   Upgrade $http_upgrade;
        proxy_cache_bypass $http_upgrade;
      }
  # -- (list) Ingress host configuration
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific

  # -- (list) TLS configuration for the ingress
  tls: []
    # - secretName: chart-example-tls
    #   hosts:
    #     - chart-example.local

# -- (object) Resource limits and requests for the container
resources: {}
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

# -- (list) Container resize policy for the uptime-kuma container
# Ref: https://kubernetes.io/docs/tasks/configure-pod-container/resize-container-resources/
resizePolicy: []
  # - resourceName: cpu
  #   restartPolicy: NotRequired
  # - resourceName: memory
  #   restartPolicy: RestartContainer

# -- (object) Node labels for pod assignment
nodeSelector: {}

# -- (list) Tolerations for pod assignment
tolerations: []

# -- (object) Affinity for pod assignment
affinity: {}

livenessProbe:
  # -- (bool) Enable liveness probe
  enabled: true
  # -- (int) Number of consecutive failures before considering the probe as failed
  failureThreshold: 3
  # -- (int) Initial delay before liveness probe is initiated (Uptime Kuma recommends 180 seconds)
  # https://github.com/louislam/uptime-kuma/blob/ae224f9e188b1fc32ed8729818710975589cdce7/extra/healthcheck.go#L3
  initialDelaySeconds: 180
  # -- (int) How often to perform the probe
  periodSeconds: 10
  # -- (int) Minimum consecutive successes for the probe to be considered successful
  successThreshold: 1
  # -- (int) Probe timeout
  timeoutSeconds: 2
  # -- (object) Execute command for liveness probe (uses Go-based healthcheck)
  # The NodeJS Version of this Healthcheck is no longer supported
  # https://github.com/louislam/uptime-kuma/blob/ae224f9e188b1fc32ed8729818710975589cdce7/extra/healthcheck.js#L6
  exec:
    command:
      - "extra/healthcheck"

readinessProbe:
  # -- (bool) Enable readiness probe
  enabled: true
  # -- (int) Initial delay before readiness probe is initiated
  initialDelaySeconds: 10
  # -- (int) How often to perform the probe
  periodSeconds: 10
  # -- (int) Probe timeout
  timeoutSeconds: 1
  # -- (int) Number of consecutive failures before considering the probe as failed
  failureThreshold: 3
  # -- (int) Minimum consecutive successes for the probe to be considered successful
  successThreshold: 1
  # -- (object) Execute command for readiness probe
  exec:
    command: []
  # -- (object) HTTP GET request for readiness probe
  httpGet:
    path: /
    port: 3001
    scheme: HTTP
    httpHeaders: []

volume:
  # -- (bool) Enable persistent volume for storage
  enabled: true
  # -- (string) Access mode for the persistent volume
  accessMode: ReadWriteOnce
  # -- (string) Size of the persistent volume
  size: 4Gi
  # -- (string) Storage class name for the persistent volume
  storageClassName: gp3
  # -- (string) Reuse your own pre-existing PVC
  existingClaim: ""

# -- (list) A list of additional volumes to be added to the pod
additionalVolumes: []
  # - name: "additional-certificates"
  #   configMap:
  #     name: "additional-certificates"
  #     optional: true
  #     defaultMode: 420

# -- (list) A list of additional volumeMounts to be added to the pod
additionalVolumeMounts: []
  # - name: "additional-certificates"
  #   mountPath: "/etc/ssl/certs/additional/additional-ca.pem"
  #   readOnly: true
  #   subPath: "additional-ca.pem"

# -- Deployment strategy configuration
strategy:
  # -- (string) Type of deployment strategy
  type: Recreate

serviceMonitor:
  # -- (bool) Enable Prometheus ServiceMonitor
  enabled: false
  # -- (string) Scrape interval. If not set, the Prometheus default scrape interval is used
  interval: 60s
  # -- (string) Timeout if metrics can't be retrieved in given time interval
  scrapeTimeout: 10s
  # -- (string) Scheme to use when scraping, e.g. http (default) or https
  scheme: ~
  # -- (object) TLS configuration to use when scraping, only applicable for scheme https
  tlsConfig: {}
  # -- (list) Prometheus [RelabelConfigs] to apply to samples before scraping
  relabelings: []
  # -- (list) Prometheus [MetricRelabelConfigs] to apply to samples before ingestion
  metricRelabelings: []
  # -- (object) Prometheus ServiceMonitor selector, only select Prometheus instances with these labels (if not set, select any Prometheus)
  selector: {}

  # -- (string) Namespace where the ServiceMonitor resource should be created, default is the same as the release namespace
  namespace: ~
  # -- (object) Additional labels to add to the ServiceMonitor
  additionalLabels: {}
  # -- (object) Additional annotations to add to the ServiceMonitor
  annotations: {}

  # -- (object) BasicAuth credentials for scraping metrics, use API token and any string for username
  # basicAuth:
  #   username: "metrics"
  #   password: ""

# -- (string) Use this option to set a custom DNS policy to the created deployment
dnsPolicy: ""

# -- (object) Use this option to set custom DNS configurations to the created deployment
dnsConfig: {}

# -- (string) Use this option to set custom PriorityClass to the created deployment
# ref: https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/#priorityclass
priorityClassName: ""

networkPolicy:
  # -- (bool) Enable/disable Network Policy
  enabled: false
  # -- (bool) Enable/disable Ingress policy type
  ingress: true
  # -- (bool) Enable/disable Egress policy type
  egress: true
  # -- (bool) Allow incoming connections only from specific Pods. When set to true, the server will accept connections from any source. When false, only Pods with the label {{ include "uptime-kuma.fullname" . }}-client=true will have network access
  allowExternal: true
  # -- (object) Selects particular namespaces for which all Pods are allowed as ingress sources
  namespaceSelector: {}
  #  matchLabels:
  #    role: frontend
  #  matchExpressions:
  #   - {key: role, operator: In, values: [frontend]}

# -- MariaDB subchart configuration (from Bitnami)
# @default -- Omitted for brevity
mariadb:
  # -- (bool) Enable MariaDB subchart
  enabled: false
  # -- (string) MariaDB architecture (standalone or replication)
  architecture: standalone
  # -- MariaDB authentication configuration
  # @default -- Omitted for brevity
  auth:
    # -- (string) Database name to create
    database: uptime_kuma
    # -- (string) Database username to create
    username: uptime_kuma
    # -- (string) Password for the database user
    password: ""
    # -- (string) MariaDB root password
    rootPassword: ""
